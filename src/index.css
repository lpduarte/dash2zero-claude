@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. 
All colors MUST be HSL.
Brand color: #219F94 = HSL(175, 66%, 38%)
*/

@layer base {
  :root {
    /* ====== SIMPLIFIED COLOR SYSTEM ======
       Redundant variables removed. Use semantic names.
       When a new distinct color is needed, create a new variable.
    */

    /* Base colors */
    --background: 170 15% 97%;
    --foreground: 175 25% 12%;
    --card: 0 0% 100%;
    --muted: 170 15% 94%;
    --muted-foreground: 175 15% 40%;
    --border: 175 20% 88%;

    /* Primary: Brand green #219F94 */
    --primary: 175 66% 38%;
    --primary-light: 175 55% 48%;
    --primary-dark: 175 70% 28%;

    /* Status colors */
    --warning: 42 90% 50%;
    --danger: 0 70% 55%;
    --autumn: 28 80% 50%;  /* Cor de outono para elementos decorativos */

    --radius: 0.75rem;

    /* Scope/Âmbito colors for emissions charts */
    --scope-1: 233 13% 25%;  /* Azul-ardósia - Emissões Diretas */
    --scope-2: 38 85% 59%;   /* Âmbar dourado - Energia */
    --scope-3: 12 48% 48%;   /* Terracota - Cadeia de Valor */

    /* Onboarding status colors */
    --status-pending: 215 16% 65%;      /* Por contactar - Slate */
    --status-contacted: 21 90% 48%;     /* Sem interação - Orange */
    --status-interested: 38 92% 50%;    /* Interessada - Amber */
    --status-registered: 78 50% 48%;    /* Registada - Lime */
    --status-progress: 175 55% 48%;     /* Em progresso - Primary Light */
    --status-complete: 175 66% 38%;     /* Completo - Primary (marca) */

    /* Shadows with brand tint */
    --shadow-md: 0 1px 2px 0 hsla(175, 30%, 20%, 0.05);
    --shadow-md: 0 4px 6px -1px hsla(175, 30%, 20%, 0.1);
    --shadow-lg: 0 10px 15px -3px hsla(175, 30%, 20%, 0.1);
  }

  .dark {
    /* ====== DARK MODE - SIMPLIFIED ====== */

    /* Base colors */
    --background: 175 25% 8%;
    --foreground: 170 15% 95%;
    --card: 175 20% 12%;
    --muted: 175 20% 15%;
    --muted-foreground: 170 15% 60%;
    --border: 175 20% 20%;

    /* Primary: Slightly lighter for dark mode */
    --primary: 175 60% 45%;
    --primary-light: 175 55% 55%;
    --primary-dark: 175 65% 35%;

    /* Status colors */
    --warning: 42 85% 55%;
    --danger: 0 65% 58%;
    --autumn: 28 75% 55%;  /* Cor de outono para elementos decorativos */

    /* Scope/Âmbito colors for emissions charts (dark mode) */
    --scope-1: 233 20% 55%;  /* Azul-ardósia claro - Emissões Diretas */
    --scope-2: 38 80% 65%;   /* Âmbar dourado claro - Energia */
    --scope-3: 12 55% 55%;   /* Terracota claro - Cadeia de Valor */

    /* Onboarding status colors (dark mode) */
    --status-pending: 215 20% 55%;      /* Por contactar - Slate */
    --status-contacted: 21 85% 55%;     /* Sem interação - Orange */
    --status-interested: 38 85% 55%;    /* Interessada - Amber */
    --status-registered: 78 45% 55%;    /* Registada - Lime */
    --status-progress: 175 55% 55%;     /* Em progresso - Primary Light */
    --status-complete: 175 60% 45%;     /* Completo - Primary (marca) */

    /* Shadows */
    --shadow-md: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-family: "Plus Jakarta Sans", sans-serif;
  }

  /* Label appears disabled when sibling input is disabled */
  label:has(~ input:disabled),
  label:has(~ textarea:disabled),
  label:has(~ select:disabled),
  *:has(> input:disabled) > label,
  *:has(> textarea:disabled) > label,
  *:has(> select:disabled) > label {
    @apply opacity-50 cursor-not-allowed;
  }
}

/* Fade-in animation for header pulsing elements */
@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Organic pulsing animations for header background */
@keyframes pulse-slow {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.08);
  }
}

@keyframes pulse-slower {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.1);
  }
}

@layer utilities {
  .animate-pulse-slow {
    opacity: 0;
    animation: fade-in 0.8s ease-out forwards, pulse-slow 5s ease-in-out infinite;
  }

  .animate-pulse-slower {
    opacity: 0;
    animation: fade-in 0.8s ease-out forwards, pulse-slower 7s ease-in-out infinite;
  }

  .animate-glow-line {
    animation: glow-line 4s ease-in-out infinite;
  }

  /* Background pattern utilities
     Uses two pseudo-elements to layer correctly:
     - ::before = gray background (z: -2, very back)
     - ::after = pattern (z: -1, middle)
     - content = normal flow (z: auto, front)
  */

  /* Grid pattern (Methodology page) */
  .bg-grid-pattern {
    position: relative;
    isolation: isolate;
  }

  .bg-grid-pattern::before {
    content: '';
    position: absolute;
    inset: 0;
    z-index: -2;
    background-color: hsl(var(--background));
  }

  .bg-grid-pattern::after {
    content: '';
    position: absolute;
    inset: 0;
    z-index: -1;
    pointer-events: none;
    background-image:
      linear-gradient(to right, hsl(var(--border) / 0.25) 1px, transparent 1px),
      linear-gradient(to bottom, hsl(var(--border) / 0.25) 1px, transparent 1px);
    background-size: 24px 24px;
  }

  /* Dot pattern - Moleskine style (StyleGuide page) */
  .bg-dot-pattern {
    position: relative;
    isolation: isolate;
  }

  .bg-dot-pattern::before {
    content: '';
    position: absolute;
    inset: 0;
    z-index: -2;
    background-color: hsl(var(--background));
  }

  .bg-dot-pattern::after {
    content: '';
    position: absolute;
    inset: 0;
    z-index: -1;
    pointer-events: none;
    background-image: radial-gradient(circle, hsl(var(--border)) 1px, transparent 1px);
    background-size: 20px 20px;
  }

  /* Diagonal lines pattern (Index page) */
  .bg-diagonal-pattern {
    position: relative;
    isolation: isolate;
  }

  .bg-diagonal-pattern::before {
    content: '';
    position: absolute;
    inset: 0;
    z-index: -2;
    background-color: hsl(var(--background));
  }

  .bg-diagonal-pattern::after {
    content: '';
    position: absolute;
    inset: 0;
    z-index: -1;
    pointer-events: none;
    background-image: repeating-linear-gradient(
      135deg,
      transparent,
      transparent 12px,
      hsl(var(--border) / 0.25) 12px,
      hsl(var(--border) / 0.25) 13px
    );
  }
}

/* Glowing line animation for header accent */
@keyframes glow-line {
  0%, 100% {
    opacity: 0.3;
    box-shadow: 0 0 4px hsl(175 66% 38% / 0.2);
    transform: scaleX(0.98);
  }
  50% {
    opacity: 1;
    box-shadow: 0 0 12px hsl(175 66% 38% / 0.6);
    transform: scaleX(1);
  }
}

/* Liquid Glass Button Animations */
@keyframes liquid-select {
  0% {
    transform: scale(1);
    filter: blur(0px);
  }
  30% {
    transform: scale(0.95);
    filter: blur(1px);
  }
  60% {
    transform: scale(1.02);
    filter: blur(0px);
  }
  100% {
    transform: scale(1);
    filter: blur(0px);
  }
}

@keyframes liquid-glow-in {
  0% {
    box-shadow: 0 0 0px hsl(175 66% 38% / 0), inset 0 1px 0 rgba(255, 255, 255, 0);
    background: hsl(175 66% 38% / 0);
  }
  50% {
    box-shadow: 0 0 30px hsl(175 66% 38% / 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }
  100% {
    box-shadow: 0 0 20px hsl(175 66% 38% / 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2);
    background: hsl(175 66% 38% / 0.25);
  }
}

@keyframes liquid-glow-out {
  0% {
    box-shadow: 0 0 20px hsl(175 66% 38% / 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2);
    background: hsl(175 66% 38% / 0.25);
  }
  100% {
    box-shadow: 0 0 0px hsl(175 66% 38% / 0), inset 0 1px 0 rgba(255, 255, 255, 0);
    background: hsl(175 66% 38% / 0);
  }
}

.liquid-glass-btn {
  position: relative;
  transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.liquid-glass-btn.active {
  animation: liquid-select 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), liquid-glow-in 0.4s ease-out forwards;
}

.liquid-glass-btn.inactive {
  animation: liquid-glow-out 0.3s ease-out forwards;
}

.liquid-glass-btn.inactive:hover {
  border-color: hsl(175 66% 38% / 0.25) !important;
}

/* Liquid Glass Container - for wrapping elements */
.liquid-glass-container {
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

/* Dark mode adjustments for liquid glass */
.dark .liquid-glass-container {
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.15);
  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.dark .liquid-glass-btn {
  color: hsl(175 60% 65%) !important;
}

.dark .liquid-glass-btn.active {
  animation: liquid-select 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), liquid-glow-in-dark 0.4s ease-out forwards;
  border-color: hsl(175 60% 45% / 0.4) !important;
}

.dark .liquid-glass-btn.inactive:hover {
  border-color: hsl(175 60% 45% / 0.35) !important;
}

@keyframes liquid-glow-in-dark {
  0% {
    box-shadow: 0 0 0px hsl(175 60% 45% / 0), inset 0 1px 0 rgba(255, 255, 255, 0);
    background: hsl(175 60% 45% / 0);
  }
  50% {
    box-shadow: 0 0 30px hsl(175 60% 45% / 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.15);
  }
  100% {
    box-shadow: 0 0 20px hsl(175 60% 45% / 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.1);
    background: hsl(175 60% 45% / 0.2);
  }
}

/* Footer gradient with grain texture - sunrise effect with organic pulse */
.footer-gradient {
  position: relative;
  background: hsl(170 10% 96%);
  overflow: hidden;
}

.dark .footer-gradient {
  background: hsl(175 25% 8%);
}

/* Base gradient layer */
.footer-gradient::before {
  content: "";
  position: absolute;
  inset: -10%;
  background:
    radial-gradient(
      ellipse 85% 75% at 50% 110%,
      hsl(0 0% 100%) 0%,
      hsl(170 18% 94%) 15%,
      hsl(175 25% 85%) 28%,
      hsl(175 35% 72%) 42%,
      hsl(175 40% 58%) 55%,
      hsl(175 30% 68%) 70%,
      hsl(170 15% 82%) 85%,
      hsl(170 10% 96%) 100%
    );
  animation: pulse-gradient-1 7s ease-in-out infinite;
  transform-origin: center bottom;
}

.dark .footer-gradient::before {
  background:
    radial-gradient(
      ellipse 85% 75% at 50% 110%,
      hsl(175 50% 70%) 0%,
      hsl(175 45% 55%) 15%,
      hsl(175 40% 42%) 28%,
      hsl(175 35% 32%) 42%,
      hsl(175 30% 22%) 55%,
      hsl(175 28% 16%) 70%,
      hsl(175 25% 12%) 85%,
      hsl(175 25% 8%) 100%
    );
}

/* Secondary pulsing layer */
.footer-gradient::after {
  content: "";
  position: absolute;
  inset: -15%;
  background:
    radial-gradient(
      ellipse 65% 60% at 50% 115%,
      hsl(0 0% 100% / 0.95) 0%,
      hsl(175 30% 78% / 0.8) 25%,
      hsl(175 38% 62% / 0.6) 50%,
      hsl(175 30% 55% / 0.3) 70%,
      transparent 90%
    );
  animation: pulse-gradient-2 5s ease-in-out infinite;
  transform-origin: center bottom;
}

.dark .footer-gradient::after {
  background:
    radial-gradient(
      ellipse 65% 60% at 50% 115%,
      hsl(175 55% 65% / 0.9) 0%,
      hsl(175 45% 50% / 0.7) 25%,
      hsl(175 40% 38% / 0.5) 50%,
      hsl(175 35% 28% / 0.25) 70%,
      transparent 90%
    );
}

/* Global grain texture overlay */
.bg-grain::after {
  content: '';
  position: fixed;
  inset: 0;
  z-index: 1;
  pointer-events: none;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.2' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  background-size: 400px 400px;
  opacity: 0.12;
}

/* Grain overlay - applied via extra element in HTML */
.footer-gradient-grain {
  position: absolute;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.2' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  opacity: 0.12;
  pointer-events: none;
  z-index: 1;
}

@keyframes pulse-gradient-1 {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.12);
    opacity: 0.85;
  }
}

@keyframes pulse-gradient-2 {
  0%, 100% {
    transform: scale(1);
    opacity: 0.8;
  }
  40% {
    transform: scale(1.18);
    opacity: 1;
  }
  70% {
    transform: scale(0.95);
    opacity: 0.65;
  }
}

/* Horizontal bounce animation for arrows */
@keyframes bounce-x {
  0%, 100% {
    transform: translateX(0);
  }
  50% {
    transform: translateX(-4px);
  }
}
